<!-- Document Classification Box -->
<footer class="document-footer">
  <div class="classification-box">
    <h3 class="classification-heading">Document Classification</h3>
    
    <div class="classification-grid">
      <!-- Primary Classification -->
      {% if page.taxonomy and page.taxonomy.category %}
      {% assign category = site.data.taxonomy.categories | where: "id", page.taxonomy.category | first %}
      <div class="classification-item">
        <dt class="classification-label">Primary Category</dt>
        <dd class="classification-value">
          <a href="{{ site.baseurl }}/분류/{{ category.id }}" class="category-badge">
            {{ category.icon }} {{ category.name_ko }}
          </a>
        </dd>
      </div>

      {% if page.taxonomy.subcategory %}
      {% assign subcategory = category.subcategories | where: "id", page.taxonomy.subcategory | first %}
      <div class="classification-item">
        <dt class="classification-label">Subcategory</dt>
        <dd class="classification-value">
          <a href="{{ site.baseurl }}/분류/{{ category.id }}/{{ subcategory.id }}" class="subcategory-badge">
            {{ subcategory.name }}
          </a>
        </dd>
      </div>
      {% endif %}
      {% endif %}

      <!-- Keywords/Tags -->
      {% if page.keywords %}
      <div class="classification-item full-width">
        <dt class="classification-label">Keywords</dt>
        <dd class="classification-value">
          <div class="keywords-list">
            {% for keyword in page.keywords %}
            <span class="keyword-tag">{{ keyword }}</span>
            {% endfor %}
          </div>
        </dd>
      </div>
      {% endif %}

      <!-- Difficulty Level -->
      {% if page.difficulty %}
      <div class="classification-item">
        <dt class="classification-label">Difficulty</dt>
        <dd class="classification-value">
          {% assign level = site.data.taxonomy.difficulty_levels | where: "id", page.difficulty | first %}
          <span class="difficulty-badge difficulty-{{ page.difficulty }}" style="background-color: {{ level.color }};">
            {{ level.name_ko }}
          </span>
        </dd>
      </div>
      {% endif %}

      <!-- Document Version -->
      {% if page.version %}
      <div class="classification-item">
        <dt class="classification-label">Version</dt>
        <dd class="classification-value">{{ page.version }}</dd>
      </div>
      {% endif %}

      <!-- Last Updated -->
      {% if page.updated %}
      <div class="classification-item">
        <dt class="classification-label">Last Updated</dt>
        <dd class="classification-value">{{ page.updated | date: "%Y-%m-%d" }}</dd>
      </div>
      {% endif %}

      <!-- License -->
      <div class="classification-item">
        <dt class="classification-label">License</dt>
        <dd class="classification-value">
          <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="license-link">
            CC BY-SA 4.0
          </a>
        </dd>
      </div>

      <!-- Permanent URL -->
      <div class="classification-item full-width">
        <dt class="classification-label">Permalink</dt>
        <dd class="classification-value">
          <code class="permalink-url">{{ page.url | absolute_url }}</code>
        </dd>
      </div>
    </div>

    <!-- Citation Format -->
    <div class="citation-box">
      <h4 class="citation-heading">Citation</h4>
      <div class="citation-content">
        <code class="citation-text">
          {{ site.author }} ({{ page.date | date: "%Y" }}). {{ page.title }}. 
          <em>{{ site.title }}</em>. 
          Retrieved from {{ page.url | absolute_url }}
        </code>
      </div>
    </div>
  </div>
</footer>
