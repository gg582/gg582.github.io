// Import Core Clean Blog SCSS
@import "../assets/vendor/startbootstrap-clean-blog/scss/styles.scss";

// AI Refactoring: Import variable overrides first
@import "refactor-vars";

// AI Refactoring: Import custom styles and layout overrides
@import "refactor-styles";

// Knowledge Base System: East Asian Scholarly Layout
@import "knowledge-base";
@import "category-layout";

/* 
 * Custom Typography: 
 * Strengthening bold text where the global default is too thin.
 */
b, strong {
    font-weight: 800 !important;
}

/* * Custom Table Styles for BBR Experiment Results
 * Designed to improve visibility by increasing font weight 
 * where the global default is too thin.
 */
.bbr-results, .bbr-comparison-box, .post-content table {
    width: 100% !important;
    border-collapse: collapse !important;
    margin: 2.5rem 0 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
    font-family: inherit !important;

    /* Responsive horizontal scroll for smaller screens */
    display: block !important;
    overflow-x: auto !important;

    th {
        background-color: #1a202c !important; 
        color: #ffffff !important;
        padding: 15px 10px !important;
        text-align: center !important;
        border: 1px solid #111116 !important;
        /* Strengthening font weight as the global default is thin */
        font-weight: 700 !important; 
        white-space: nowrap !important;
    }

    td {
        padding: 12px 10px !important;
        border: 1px solid #e2e8f0 !important;
        text-align: center !important;
        color: #495057 !important; 
        vertical-align: middle !important;
        /* Ensuring standard data is not too faint */
        font-weight: 400 !important; 
    }

    /* Styling for the Metric/Case labels in the first column */
    .metric-label, .case-label, td:first-child {
        background-color: #f8fafc !important;
        /* Using extra bold (800) or bold (700) to stand out from thin global text */
        font-weight: 800 !important; 
        text-align: left !important;
        color: #212529 !important; 
        min-width: 160px !important;
    }

    /* Highlight positive performance improvements in success green */
    .highlight-positive {
        color: #28a745 !important; 
        font-weight: 800 !important;
        background-color: rgba(40, 167, 69, 0.05) !important;
    }

    /* Reset display for larger screens to maintain table structure */
    @media (min-width: 992px) {
        display: table !important;
    }
}

/*
 * Custom Font Overrides
 * UI Font: Pretendard
 * Code Font: Inconsolata (with M PLUS 1p fallback) - Limited to code blocks
 */

body, p, h1, h2, h3, h4, h5, h6, .section-heading, a, .caption, blockquote {
    font-family: 'Pretendard', 'M PLUS 1p', sans-serif !important;
}

/* Rounded Code Blocks & Font */
pre, .highlight {
    border-radius: 10px !important;
    /* Ensure the background clipping respects the border radius if there's a background color */
    overflow: hidden; 
    font-family: 'Inconsolata', 'M PLUS 1p', monospace !important;
    /* Theme-independent Code Block Styles */
    background-color: #2d2d2d; /* Dark gray background */
    color: #f8f8f2; /* Light text color */
    border: 1px solid #4a4a4a; /* Consistent border */
    padding: 1em;
    overflow-x: auto; /* Enable horizontal scrolling for long lines */
}

/* Targeting code inside blocks to ensure they inherit or use the specific font */
pre code, .highlight code, .highlight .w {
    font-family: 'Inconsolata', 'M PLUS 1p', monospace !important;
    color: #f8f8f2; /* Ensure code text is light */
}

/* Syntax Highlighting Colors (adjust as needed for a good contrast on dark background) */
.highlight .c1, .highlight .c, .highlight .cm { /* Comments */
    color: #75715e;
}
.highlight .p { /* Punctuation */
    color: #f8f8f2;
}
.highlight .k, .highlight .kc, .highlight .kd, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kt, .highlight .nb { /* Keywords */
    color: #66d9ef;
}
.highlight .s, .highlight .s1, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .dl { /* Strings */
    color: #a6e22e;
}
.highlight .mi, .highlight .il, .highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .mo, .highlight .mx { /* Numbers */
    color: #ae81ff;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi, .highlight .vm { /* Variables */
    color: #f8f8f2;
}

/*
 * Adaptive Masthead Text Color
 * Based on background image brightness, detected by JavaScript.
 */
.masthead.light-bg .site-heading h1,
.masthead.light-bg .page-heading h1,
.masthead.light-bg .post-heading h1,
.masthead.light-bg .subheading,
.masthead.light-bg .meta {
  color: #1A1A1A; /* Dark text for light backgrounds */
}

.masthead.dark-bg .site-heading h1,
.masthead.dark-bg .page-heading h1,
.masthead.dark-bg .post-heading h1,
.masthead.dark-bg .subheading,
.masthead.dark-bg .meta {
  color: #fff; /* White text for dark backgrounds */
}


/*
 * Dark Mode Styles
 */
body.dark-mode {
  background-color: #232328;
  color: #f1f1f1;

  p, li, span, div {
    color: #f1f1f1;
  }

  hr {
    border-color: #4a4a4a;
  }

  h1, h2, h3, h4, h5, h6, .section-heading {
    color: #f1f1f1;
  }

  a {
    color: #deebf3;
  }
  a:hover, a:focus {
    color: #cedbf3;
  }

  blockquote {
    color: #b0b0b0;
    border-left-color: #4a4a4a;
  }

  .post-preview > a {
    color: #f1f1f1;
  }
  .post-preview > a:hover, .post-preview > a:focus {
    color: #f1f1f1;
  }
  .post-preview > a > .post-title {
    color: #f1f1f1;
  }
  .post-preview > .post-meta {
    color: #b0b0b0;
  }
  .post-preview > .post-meta a {
    color: #b0b0b0;
  }
  .post-preview > .post-meta a:hover, .post-preview > .post-meta a:focus {
    color: #80bfff;
  }



  footer {
    background-color: #232328;
    border-top: 1px solid #4a4a4a;
  }
  footer .list-inline .list-inline-item a {
    // Remove color setting for the anchor tag to prevent it from affecting the icons
  }
  footer .list-inline .list-inline-item a:hover, footer .list-inline .list-inline-item a:focus {
    // Remove color setting for the anchor tag to prevent it from affecting the icons
  }
  footer .list-inline .list-inline-item .fa-stack .fa-circle {
    color: #333; /* Dark gray for the circle background in dark mode */
  }
  footer .list-inline .list-inline-item .fa-stack .fa-inverse {
    color: #fff; /* White for the icon in dark mode */
  }
  footer .copyright {
    color: #b0b0b0;
  }

  .floating-label-form-group {
    border-bottom-color: #4a4a4a !important;
  }

  .floating-label-form-group-with-value label {
    color: #80bfff !important;
  }

  .floating-label-form-group input,
  .floating-label-form-group textarea {
    color: #f1f1f1;
  }

  .btn-primary {
    background-color: #deebf3;
    border-color: #cedbf3;
  }
  .btn-primary:hover, .btn-primary:focus, .btn-primary:active {
    background-color: #80bfff !important;
    border-color: #80bfff !important;
  }

  .toc {
    background: #34495E;
    border: 1px solid #4a4a4a;
  }
  .toc h4 {
    border-bottom: 1px solid #4a4a4a;
  }
  .toc ul {
    color: #f1f1f1;
  }

  .bbr-results, .bbr-comparison-box, .post-content table {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
    th {
        background-color: #34495E !important;
        color: #fff !important;
        border: 1px solid #4a4a4a !important;
    }
    td {
        border: 1px solid #4a4a4a !important;
        color: #ccc !important;
    }
    .metric-label, .case-label, td:first-child {
        background-color: #232328 !important;
        color: #eee !important;
    }
    .highlight-positive {
        color: #28a745 !important;
        background-color: rgba(40, 167, 69, 0.15) !important;
    }
  }


} // Closing brace for body.dark-mode

footer .list-inline .fa-stack .fa-circle {
  color: #333; /* Dark gray for the circle background */
}

footer .list-inline .fa-stack .fa-inverse {
  color: #fff; /* White for the icon */
}

#theme-toggle {
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Overall container settings */
.theme-switch-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.theme-switch {
  display: inline-block;
  height: 34px;
  position: relative;
  width: 80px; /* Set a bit wider to accommodate text */
}

.theme-switch input {
  display: none;
}

/* Slider background */
.slider {
  background-color: #333; /* Background when in default (Light) state */
  bottom: 0;
  cursor: pointer;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  transition: .4s;
  border-radius: 34px;
}

/* Text written on the background (Light/Dark) */
.slider:before {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 12px;
  font-family: sans-serif;
  font-weight: bold;
  color: white;
  transition: .4s;
}

/* Default state (when left): Display 'Dark' on the right margin */
.slider:before {
  content: "Dark";
  right: 10px;
}

/* Moving circular button */
.slider:after {
  background-color: #fff;
  bottom: 4px;
  content: "";
  height: 26px;
  left: 4px;
  position: absolute;
  transition: .4s;
  width: 26px;
  border-radius: 50%;
}

/* When checked (shifted to the right) */
input:checked + .slider {
  background-color: #2196F3;
}

/* When shifted to the right: Display 'Light' on the left margin */
input:checked + .slider:before {
  content: "Light";
  left: 10px;
  right: auto;
}

/* Button movement */
input:checked + .slider:after {
  transform: translateX(46px);
}
