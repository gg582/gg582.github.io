// AI Refactoring: Import variable overrides first
@import "refactor-vars";

// Import Core Clean Blog SCSS
@import "../assets/vendor/startbootstrap-clean-blog/scss/styles.scss";

// AI Refactoring: Import custom styles and layout overrides
@import "refactor-styles";

/* 
 * Custom Typography: 
 * Strengthening bold text where the global default is too thin.
 */
b, strong {
    font-weight: 800 !important;
}

/* * Custom Table Styles for BBR Experiment Results
 * Designed to improve visibility by increasing font weight 
 * where the global default is too thin.
 */
.bbr-results, .bbr-comparison-box, .post-content table {
    width: 100% !important;
    border-collapse: collapse !important;
    margin: 2.5rem 0 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
    font-family: inherit !important;

    /* Responsive horizontal scroll for smaller screens */
    display: block !important;
    overflow-x: auto !important;

    th {
        background-color: #1a202c !important; 
        color: #ffffff !important;
        padding: 15px 10px !important;
        text-align: center !important;
        border: 1px solid #2d3748 !important;
        /* Strengthening font weight as the global default is thin */
        font-weight: 700 !important; 
        white-space: nowrap !important;
    }

    td {
        padding: 12px 10px !important;
        border: 1px solid #e2e8f0 !important;
        text-align: center !important;
        color: #495057 !important; 
        vertical-align: middle !important;
        /* Ensuring standard data is not too faint */
        font-weight: 400 !important; 
    }

    /* Styling for the Metric/Case labels in the first column */
    .metric-label, .case-label, td:first-child {
        background-color: #f8fafc !important;
        /* Using extra bold (800) or bold (700) to stand out from thin global text */
        font-weight: 800 !important; 
        text-align: left !important;
        color: #212529 !important; 
        min-width: 160px !important;
    }

    /* Highlight positive performance improvements in success green */
    .highlight-positive {
        color: #28a745 !important; 
        font-weight: 800 !important;
        background-color: rgba(40, 167, 69, 0.05) !important;
    }

    /* Reset display for larger screens to maintain table structure */
    @media (min-width: 992px) {
        display: table !important;
    }
}

/*
 * Custom Font Overrides
 * UI Font: IBM Plex Sans KR
 * Code Font: Inconsolata (with IBM Plex Sans KR fallback) - Limited to code blocks
 */

body, p, h1, h2, h3, h4, h5, h6, .section-heading, a, .caption, blockquote {
    font-family: 'IBM Plex Sans KR', sans-serif !important;
}

/* Rounded Code Blocks & Font */
pre, .highlight {
    border-radius: 10px !important;
    /* Ensure the background clipping respects the border radius if there's a background color */
    overflow: hidden; 
    font-family: 'Inconsolata', 'IBM Plex Sans KR', monospace !important;
}

/* Targeting code inside blocks to ensure they inherit or use the specific font */
pre code, .highlight code, .highlight .w {
    font-family: 'Inconsolata', 'IBM Plex Sans KR', monospace !important;
}

/*
 * Korean Traditional Document Style for Navbar
 * Using traditional Korean color scheme: Orange-tinted red box (주황빛 주홍색) with Black text (먹색)
 * This mimics the emphasis style used in historical Korean documents like Joseon Dynasty Annals
 * Flat, desaturated colors for authentic paper-like traditional feel
 */
#mainNav .navbar-brand,
#mainNav .navbar-nav .nav-link,
#mainNav .navbar-toggler {
    background-color: $korean-trad-red !important; /* Traditional orange-tinted vermilion - desaturated */
    color: $korean-trad-black !important; /* Ink black color */
    padding: 8px 16px !important;
    border-radius: 0 !important; /* Sharp corners for traditional document feel */
    border: 2px solid $korean-trad-black !important; /* Double border effect - outer */
    box-shadow: inset 0 0 0 1px $korean-trad-black !important; /* Double border effect - inner */
    font-weight: 600 !important;
    display: inline-block !important;
    margin: 4px 2px !important;
    transition: background-color 0.3s ease !important;
}

/* Additional border for menu toggle button */
#mainNav .navbar-toggler {
    border: 2px solid $korean-trad-black !important;
    box-shadow: inset 0 0 0 1px $korean-trad-black !important;
}

#mainNav .navbar-brand:hover,
#mainNav .navbar-brand:focus,
#mainNav .navbar-nav .nav-link:hover,
#mainNav .navbar-nav .nav-link:focus {
    background-color: $korean-trad-red-dark !important; /* Slightly darker on hover */
    color: $korean-trad-black !important;
}

#mainNav .navbar-toggler .fa-bars {
    color: $korean-trad-black !important;
}

/*
 * Masthead text contrast enhancement
 * The refactor-styles.scss removes the overlay, so text needs to adapt to background
 * Using dark text with light shadow for better readability on light backgrounds
 */
.masthead .site-heading h1,
.masthead .page-heading h1,
.masthead .post-heading h1 {
    color: $chulhwa !important;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
                 0 0 40px rgba(255, 255, 255, 0.6),
                 2px 2px 4px rgba(255, 255, 255, 0.5) !important;
}

.masthead .subheading,
.masthead .meta {
    color: rgba($chulhwa, 0.85) !important;
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                 0 0 30px rgba(255, 255, 255, 0.5),
                 1px 1px 3px rgba(255, 255, 255, 0.4) !important;
}

/*
 * Dark Mode Styles
 */
@media (prefers-color-scheme: dark) {
  body {
    background-color: #1c1c1e;
    color: #f1f1f1;
  }

  hr {
    border-color: #4a4a4a;
  }

  h1, h2, h3, h4, h5, h6, .section-heading {
    color: #f1f1f1;
  }

  a {
    color: #58a6ff;
  }
  a:hover, a:focus {
    color: #80bfff;
  }

  blockquote {
    color: #b0b0b0;
    border-left-color: #4a4a4a;
  }

  .post-preview > a {
    color: #f1f1f1;
  }
  .post-preview > a:hover, .post-preview > a:focus {
    color: #f1f1f1;
  }
  .post-preview > a > .post-title {
    color: #f1f1f1;
  }
  .post-preview > .post-meta {
    color: #b0b0b0;
  }
  .post-preview > .post-meta a {
    color: #b0b0b0;
  }
  .post-preview > .post-meta a:hover, .post-preview > .post-meta a:focus {
    color: #80bfff;
  }

  #mainNav {
    background-color: #1c1c1e;
    border-bottom-color: #4a4a4a;
  }
  /* Dark mode uses grayish-blue (회청색) for contrast */
  #mainNav .navbar-nav .nav-link {
    background-color: $dark-mode-contrast !important;
    color: #1A1A1A !important;
    border: 2px solid #1A1A1A !important;
    box-shadow: inset 0 0 0 1px #1A1A1A !important;
  }
  #mainNav .navbar-brand {
    background-color: $dark-mode-contrast !important;
    color: #1A1A1A !important;
    border: 2px solid #1A1A1A !important;
    box-shadow: inset 0 0 0 1px #1A1A1A !important;
  }
  #mainNav .navbar-toggler {
    background-color: $dark-mode-contrast !important;
    color: #1A1A1A !important;
    border: 2px solid #1A1A1A !important;
    box-shadow: inset 0 0 0 1px #1A1A1A !important;
  }
  #mainNav .navbar-nav .nav-link:hover,
  #mainNav .navbar-nav .nav-link:focus,
  #mainNav .navbar-brand:hover,
  #mainNav .navbar-brand:focus {
    background-color: darken($dark-mode-contrast, 10%) !important;
    color: #1A1A1A !important;
  }

  /* Dark mode masthead text - use grayish blue for contrast */
  .masthead .site-heading h1,
  .masthead .page-heading h1,
  .masthead .post-heading h1 {
    color: $dark-mode-contrast !important;
    text-shadow: 0 0 20px rgba(0, 0, 0, 0.8),
                 0 0 40px rgba(0, 0, 0, 0.6),
                 2px 2px 4px rgba(0, 0, 0, 0.5) !important;
  }

  .masthead .subheading,
  .masthead .meta {
    color: rgba($dark-mode-contrast, 0.85) !important;
    text-shadow: 0 0 15px rgba(0, 0, 0, 0.8),
                 0 0 30px rgba(0, 0, 0, 0.5),
                 1px 1px 3px rgba(0, 0, 0, 0.4) !important;
  }

  .masthead .overlay {
    background-color: #000;
    opacity: 0.6;
  }

  footer {
    background-color: #1c1c1e;
    border-top: 1px solid #4a4a4a;
  }
  footer .list-inline .list-inline-item a {
    color: #f1f1f1;
  }
  footer .list-inline .list-inline-item a:hover, footer .list-inline .list-inline-item a:focus {
    color: #80bfff;
  }
  footer .copyright {
    color: #b0b0b0;
  }

  .floating-label-form-group {
    border-bottom-color: #4a4a4a !important;
  }

  .floating-label-form-group-with-value label {
    color: #80bfff !important;
  }

  .floating-label-form-group input,
  .floating-label-form-group textarea {
    color: #f1f1f1;
  }

  .btn-primary {
    background-color: #58a6ff;
    border-color: #58a6ff;
  }
  .btn-primary:hover, .btn-primary:focus, .btn-primary:active {
    background-color: #80bfff !important;
    border-color: #80bfff !important;
  }

  .toc {
    background: #2c2c2e;
    border: 1px solid #4a4a4a;
  }
  .toc h4 {
    border-bottom: 1px solid #4a4a4a;
  }
  .toc ul {
    color: #f1f1f1;
  }

  .bbr-results, .bbr-comparison-box, .post-content table {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
    th {
        background-color: #333 !important;
        color: #fff !important;
        border: 1px solid #4a4a4a !important;
    }
    td {
        border: 1px solid #4a4a4a !important;
        color: #ccc !important;
    }
    .metric-label, .case-label, td:first-child {
        background-color: #222 !important;
        color: #eee !important;
    }
    .highlight-positive {
        color: #28a745 !important;
        background-color: rgba(40, 167, 69, 0.15) !important;
    }
  }

  pre, .highlight {
    background-color: #2c2c2e;
    border: 1px solid #4a4a4a;
  }
  pre code, .highlight code, .highlight .w {
    color: #f1f1f1;
  }
  .highlight .c1, .highlight .c, .highlight .cm {
    color: #999;
  }
  .highlight .p {
    color: #f1f1f1;
  }
  .highlight .k, .highlight .kc, .highlight .kd, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kt, .highlight .nb {
    color: #ff79c6;
  }
  .highlight .s, .highlight .s1, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .dl {
    color: #50fa7b;
  }
  .highlight .mi, .highlight .il, .highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .mo, .highlight .mx {
    color: #bd93f9;
  }
  .highlight .n, .highlight .na, .highlight .nc, .highlight .nd, .highlight .nf, .highlight .ni, .highlight .nl, .highlight .nn, .highlight .no, .highlight .nx, .highlight .py, .highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi, .highlight .vm {
    color: #8be9fd;
  }
}
